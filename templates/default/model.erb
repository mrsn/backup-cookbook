# encoding: utf-8

Backup::Model.new(:my_backup, '<%= @backup_description %>') do

  split_into_chunks_of <%= @chunk_size %>

  archive :my_archive do |archive|
  <% @directories_to_archive.each do |directory| %>
    archive.add directory
  <% end %>
  end

  store_with SFTP do |server|
    server.username   = "<%= @sftp_username %>" 
    server.password   = "<%= @sftp_password %>"
    server.ip         = "<%= @sftp_server_ip %>"
    server.port       = "<%= @sftp_server_port %>"
    server.path       = "<%= @sftp_server_backup_path %>"
    server.keep       = <%= @keep %>
  end

  compress_with <%= @compress_method %>

  #notify_by Mail do |mail|
  #  mail.on_success           = true
  #  mail.on_warning           = true
  #  mail.on_failure           = true

  #  mail.from                 = "sender@email.com"
  #  mail.to                   = "receiver@email.com"
  #  mail.address              = "smtp.gmail.com"
  #  mail.port                 = 587
  #  mail.domain               = "your.host.name"
  #  mail.user_name            = "sender@email.com"
  #  mail.password             = "my_password"
  #  mail.authentication       = "plain"
  #  mail.encryption           = :starttls
  #end

end
